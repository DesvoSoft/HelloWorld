---
import Layout from '../layouts/Layout.astro';
import BtcTracker from '../components/BtcTracker.astro';
import '../styles/page-specific/info-pages.css';
import '../styles/crypto-toc.css';
---

<Layout title="Guía de Criptomonedas">
    <style>
      .doc-section {
        scroll-margin-top: calc(var(--navbar-h, 64px) + 16px);
      }

      hr.section-sep {
        border: 0;
        height: 1px;
        background: linear-gradient(90deg, rgba(15, 23, 36, 0.06), rgba(15, 23, 36, 0.1));
        margin: 1.25rem 0;
        opacity: 0.95;
        border-radius: 1px;
      }

      body.dark hr.section-sep {
        background: linear-gradient(90deg, rgba(255, 255, 255, 0.03), rgba(255, 255, 255, 0.06));
      }

      .content-shell {
        width: auto !important; /* !important corrige el ancho inline heredado del layout original */
        max-width: var(--content-max-width, 1100px);
        margin: 0 auto;
      }

      /* Pop-up Styles */
      .popup-overlay {
        display: none; /* Hidden by default */
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.7);
        z-index: 1000;
        justify-content: center;
        align-items: center;
        backdrop-filter: blur(5px);
      }

      .popup-content {
        background: var(--bg-card, #1a1f2e);
        border: 1px solid var(--border-color, rgba(255, 255, 255, 0.1));
        padding: 2rem;
        border-radius: 16px;
        max-width: 500px;
        width: 90%;
        position: relative;
        box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
        animation: popupFadeIn 0.3s ease-out;
      }

      @keyframes popupFadeIn {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .popup-close-btn {
        position: absolute;
        top: 1rem;
        right: 1rem;
        background: none;
        border: none;
        color: var(--text-muted, #8892b0);
        font-size: 1.5rem;
        cursor: pointer;
        padding: 0.25rem;
        line-height: 1;
        transition: color 0.2s;
      }

      .popup-close-btn:hover {
        color: var(--text-main, #fff);
      }

      .popup-header {
        display: flex;
        align-items: center;
        gap: 1rem;
        margin-bottom: 1.5rem;
        border-bottom: 1px solid var(--border-color, rgba(255, 255, 255, 0.1));
        padding-bottom: 1rem;
      }

      .popup-icon {
        font-size: 1.5rem;
      }

      .popup-header h2 {
        margin: 0;
        font-size: 1.5rem;
        color: var(--text-main, #fff);
        border: none;
        padding: 0;
      }

      .popup-body {
        color: var(--text-body, #a8b2d1);
        font-size: 0.95rem;
        line-height: 1.6;
        margin-bottom: 2rem;
      }

      .popup-body p {
        margin-bottom: 1rem;
      }

      .popup-body p:last-child {
        margin-bottom: 0;
      }

      .popup-actions {
        display: flex;
        justify-content: flex-end;
      }

      .popup-accept-btn {
        background: var(--accent, #64ffda);
        color: var(--bg-main, #0a192f);
        border: none;
        padding: 0.75rem 1.5rem;
        border-radius: 8px;
        font-weight: 600;
        cursor: pointer;
        transition: transform 0.2s, filter 0.2s;
      }

      .popup-accept-btn:hover {
        transform: translateY(-2px);
        filter: brightness(1.1);
      }
      .disclaimer-btn {
        display: flex;
        justify-content: center;
        margin: 2rem 0;
      }

      .show-popup-btn {
        background: rgba(100, 255, 218, 0.1);
        color: var(--accent, #64ffda);
        border: 1px solid rgba(100, 255, 218, 0.3);
        padding: 0.75rem 1.5rem;
        border-radius: 12px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        font-family: 'Inter', sans-serif;
        letter-spacing: 0.02em;
      }

      .show-popup-btn:hover {
        background: rgba(100, 255, 218, 0.2);
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(100, 255, 218, 0.1);
        border-color: var(--accent, #64ffda);
      }
    </style>
    
    <div class="popup-overlay" id="disclaimerPopup">
        <div class="popup-content">
            <button class="popup-close-btn" id="closePopupBtn">&times;</button>
            <div class="popup-header">
                <span class="popup-icon" aria-hidden="true">⚠️</span>
                <h2>Aviso Importante</h2>
            </div>
            <div class="popup-body">
                <p>
                    La información proporcionada en este sitio es únicamente con fines educativos e informativos. No debe considerarse como asesoramiento financiero, de inversión o de otro tipo. Las inversiones en criptomonedas pueden ser volátiles y conllevan riesgos. Te recomiendo encarecidamente que realices tu propia investigación y consultes a un profesional financiero antes de tomar decisiones de inversión.
                </p>
                <p>
                    La información proporcionada en este sitio web es solo para fines informativos generales. Recuerda que cada persona tiene una situación financiera única, y lo que funciona para uno puede no ser adecuado para otro. La responsabilidad de tus decisiones de inversión es exclusivamente tuya.
                </p>
            </div>
            <div class="popup-actions">
                <button class="popup-accept-btn" id="acceptDisclaimerBtn">Aceptar y cerrar</button>
            </div>
        </div>
    </div>

    <nav
      class="page-index toc"
      aria-label="Índice del artículo"
      data-toc-scope="crypto"
    >
      <div class="toc-ribbon" role="navigation" aria-label="Índice navegable">
        <div class="toc-head">
          <p class="toc-eyebrow">Índice</p>
          <div class="toc-scroll-controls" aria-hidden="true">
            <button
              class="toc-scroll-btn"
              type="button"
              data-dir="-1"
              aria-label="Desplazar índice hacia la izquierda"
            ></button>
            <button
              class="toc-scroll-btn"
              type="button"
              data-dir="1"
              aria-label="Desplazar índice hacia la derecha"
            ></button>
          </div>
        </div>
        <div class="toc-track-shell" data-scroll-state="start">
          <ul id="toc-list" class="toc-track" role="list" aria-label="Secciones de la guía">
            <li class="toc-item">
              <a class="toc-chip toc-link" data-toc-id="investment-types" href="#investment-types">Tipos de inversión</a>
            </li>
            <li class="toc-item">
              <a class="toc-chip toc-link" data-toc-id="risk-management" href="#risk-management">Gestión de riesgos</a>
            </li>
            <li class="toc-item">
              <a class="toc-chip toc-link" data-toc-id="technical-analysis" href="#technical-analysis">Análisis técnico</a>
            </li>
            <li class="toc-item">
              <a class="toc-chip toc-link" data-toc-id="fundamental-analysis" href="#fundamental-analysis">Análisis fundamental</a>
            </li>
            <li class="toc-item">
              <a class="toc-chip toc-link" data-toc-id="derivatives" href="#derivatives">Futuros y derivados</a>
            </li>
            <li class="toc-item toc-item-has-sub">
              <div class="toc-chip-shell">
                <a class="toc-chip toc-link" data-toc-id="rsi-bb-strategy" href="#rsi-bb-strategy">Estrategia práctica: RSI + BB</a>
                <button
                  class="toc-sub-trigger"
                  type="button"
                  aria-expanded="false"
                  aria-controls="toc-sub-rsi-bb"
                  aria-label="Mostrar subapartados de Estrategia práctica: RSI + Bandas de Bollinger (BTC Spot)"
                >
                  <span class="toc-sub-trigger-icon" aria-hidden="true"></span>
                </button>
              </div>
              <div id="toc-sub-rsi-bb" class="toc-submenu" hidden>
                <ul class="toc-sub-list" role="list">
                  <li><a class="toc-link" data-toc-id="rsi-resumen-rapido" href="#rsi-resumen-rapido">Resumen rápido</a></li>
                  <li><a class="toc-link" data-toc-id="rsi-explicacion-rsi" href="#rsi-explicacion-rsi">Explicación del RSI</a></li>
                  <li><a class="toc-link" data-toc-id="rsi-bandas-bollinger" href="#rsi-bandas-bollinger">Explicación de Bandas de Bollinger</a></li>
                  <li><a class="toc-link" data-toc-id="rsi-reglas-estrategia" href="#rsi-reglas-estrategia">Reglas claras de la estrategia</a></li>
                  <li><a class="toc-link" data-toc-id="rsi-gestion-riesgo" href="#rsi-gestion-riesgo">Gestión de riesgo</a></li>
                  <li><a class="toc-link" data-toc-id="rsi-practica-validacion" href="#rsi-practica-validacion">Práctica y validación</a></li>
                  <li><a class="toc-link" data-toc-id="rsi-alertas-tradingview" href="#rsi-alertas-tradingview">Alertas en TradingView</a></li>
                </ul>
              </div>
            </li>
            <li class="toc-item">
              <a class="toc-chip toc-link" data-toc-id="why-it-works" href="#why-it-works">Por qué funciona esta combinación</a>
            </li>
            <li class="toc-item">
              <a class="toc-chip toc-link" data-toc-id="example" href="#example">Ejemplo práctico (resumen)</a>
            </li>
            <li class="toc-item toc-item-has-sub">
              <div class="toc-chip-shell">
                <a class="toc-chip toc-link" data-toc-id="recommended-times" href="#recommended-times">Horarios recomendados</a>
                <button
                  class="toc-sub-trigger"
                  type="button"
                  aria-expanded="false"
                  aria-controls="toc-sub-recommended-times"
                  aria-label="Mostrar subapartados de Horarios recomendados para revisar"
                >
                  <span class="toc-sub-trigger-icon" aria-hidden="true"></span>
                </button>
              </div>
              <div id="toc-sub-recommended-times" class="toc-submenu" hidden>
                <ul class="toc-sub-list" role="list">
                  <li><a class="toc-link" data-toc-id="horarios-frecuencia-sugerida" href="#horarios-frecuencia-sugerida">Frecuencia sugerida</a></li>
                  <li><a class="toc-link" data-toc-id="horarios-concretos" href="#horarios-concretos">Horarios concretos (CST, UTC−6) y por qué</a></li>
                  <li><a class="toc-link" data-toc-id="horarios-checklist" href="#horarios-checklist">Qué mirar en cada chequeo (checklist rápido)</a></li>
                  <li><a class="toc-link" data-toc-id="horarios-reglas-practicas" href="#horarios-reglas-practicas">Reglas prácticas para no sobre-operar</a></li>
                  <li><a class="toc-link" data-toc-id="horarios-plantilla-compacta" href="#horarios-plantilla-compacta">Plantilla de horario compacta (ejemplo)</a></li>
                </ul>
              </div>
            </li>
            <li class="toc-item toc-item-has-sub">
              <div class="toc-chip-shell">
                <a class="toc-chip toc-link" data-toc-id="swing-trading-guide" href="#swing-trading-guide">Swing trading</a>
                <button
                  class="toc-sub-trigger"
                  type="button"
                  aria-expanded="false"
                  aria-controls="toc-sub-swing-trading"
                  aria-label="Mostrar subapartados de Swing trading — guía práctica"
                >
                  <span class="toc-sub-trigger-icon" aria-hidden="true"></span>
                </button>
              </div>
              <div id="toc-sub-swing-trading" class="toc-submenu" hidden>
                <ul class="toc-sub-list" role="list">
                  <li><a class="toc-link" data-toc-id="swing-caracteristicas" href="#swing-caracteristicas">Características principales</a></li>
                  <li><a class="toc-link" data-toc-id="swing-ventajas-desventajas" href="#swing-ventajas-desventajas">Ventajas y desventajas</a></li>
                  <li><a class="toc-link" data-toc-id="swing-proceso" href="#swing-proceso">Proceso simplificado de una operación swing (pasos)</a></li>
                  <li><a class="toc-link" data-toc-id="swing-reglas-riesgo" href="#swing-reglas-riesgo">Reglas de gestión de riesgo (esenciales)</a></li>
                  <li><a class="toc-link" data-toc-id="swing-ejemplo" href="#swing-ejemplo">Ejemplo práctico breve (resumen)</a></li>
                  <li><a class="toc-link" data-toc-id="swing-checklist" href="#swing-checklist">Checklist rápido antes de abrir (para pegar como card)</a></li>
                </ul>
              </div>
            </li>
            <li class="toc-item">
              <a class="toc-chip toc-link" data-toc-id="advanced-strategies" href="#advanced-strategies">Estrategias avanzadas</a>
            </li>
            <li class="toc-item">
              <a class="toc-chip toc-link" data-toc-id="resources" href="#resources">Recursos adicionales</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>
    <div class="content-shell">
        <main>
            <section id="intro" class="doc-section">
                <h1>Bitcoin</h1>
                <p>Bitcoin es un activo escaso (oferta máxima de 21 millones) y descentralizado, considerado "oro digital". Eventos como los halvings, donde se reduce la recompensa por bloque, refuerzan esta escasez y suelen preceder subidas de precio.</p>
                <hr class="section-sep" data-sep-purpose="intro">
                <p>Por ejemplo, quien invirtió $1,000 en BTC a comienzos de 2015 tendría ~$350,000 en 2024. Aunque el rendimiento pasado no garantiza resultados futuros, demuestra el potencial a largo plazo.</p>

                <div class="disclaimer-btn">
                    <button class="show-popup-btn" id="showPopupBtn">Ver disclaimer</button>
                </div>

                <BtcTracker />

                <hr class="section-sep" data-sep-purpose="section">

            </section>

        <section id="investment-types" class="doc-section">
            <h2>Tipos de inversión</h2>
            <ul>
                <li><strong>HODLing estratégico (largo plazo):</strong> Comprar y mantener BTC durante años. Es simple y tiene potencial de grandes ganancias, pero requiere disciplina y seguridad.</li>
                <li><strong>Trading activo:</strong>
                    <ul>
                        <li><strong>Scalping:</strong> Operaciones rápidas (minutos/horas). Requiere plataformas avanzadas y tiene alta exposición a errores.</li>
                        <li><strong>Swing trading:</strong> Basado en análisis técnico de días/semanas. Permite aprovechar tendencias, pero conlleva riesgos elevados.</li>
                    </ul>
                </li>
                <li><strong>Ingresos pasivos (yield):</strong> Prestar BTC para ganar intereses (~3–10% anual). Riesgo: quiebra de la plataforma.</li>
                <li><strong>Cobertura con derivados:</strong> Uso de futuros u opciones para proteger tenencias ante caídas.</li>
            </ul>
            <hr class="section-sep" data-sep-purpose="section">
        </section>

        <section id="risk-management" class="doc-section">
            <h2>Gestión de riesgos</h2>
            <p>Proteger tu capital es fundamental antes de buscar ganancias. Una gestión de riesgos adecuada puede marcar la diferencia entre un inversor exitoso y uno que sufre pérdidas significativas. Aquí te detallo algunas estrategias y conceptos clave:</p>
            <ul>
                <li><strong>Tamaño de posición prudente:</strong> Arriesga solo 1–2% del portafolio por operación.
                    <p>Esta regla ayuda a evitar que una sola operación perdedora tenga un impacto devastador en tu capital total. Por ejemplo, si tienes un portafolio de $10,000, no deberías arriesgar más de $100-$200 en una sola operación.</p>
                </li>
                <li><strong>Órdenes de stop-loss y take-profit:</strong> Automatiza salidas para limitar pérdidas y asegurar ganancias.
                    <ul>
                        <li><strong>Stop-Loss:</strong> Una orden para vender un activo cuando alcanza un precio específico, limitando la pérdida potencial.
                            <p>Imagina que compras BTC a $50,000. Estableces un stop-loss en $45,000. Si el precio cae a $45,000, tu posición se vende automáticamente, limitando tu pérdida a $5,000.</p>
                        </li>
                        <li><strong>Take-Profit:</strong> Una orden para vender un activo cuando alcanza un precio específico, asegurando una ganancia.
                            <p>Siguiendo el ejemplo anterior, podrías establecer un take-profit en $60,000. Si el precio sube a $60,000, tu posición se vende automáticamente, asegurando una ganancia de $10,000.</p>
                        </li>
                    </ul>
                </li>
                <li><strong>Leverage moderado:</strong> Si usas apalancamiento, mantén colateral suficiente y stops estrictos.
                    <ul>
                        <li><strong>Apalancamiento:</strong> El uso de capital prestado para aumentar el potencial de retorno de una inversión.
                            <p>Un apalancamiento de 2x significa que con $1,000 de tu capital, puedes controlar $2,000 en BTC. Si el precio de BTC sube un 10%, tu ganancia sería del 20% ($200), pero si baja un 10%, tu pérdida también sería del 20% ($200).</p>
                        </li>
                        <li><strong>Colateral:</strong> Activos ofrecidos como garantía para asegurar un préstamo.
                            <p>Al usar apalancamiento, el exchange requiere que mantengas un cierto nivel de colateral en tu cuenta. Si el precio se mueve en tu contra, tu colateral puede liquidarse para cubrir las pérdidas.</p>
                        </li>
                    </ul>
                </li>
                <li><strong>Diversificación:</strong> Incluye activos no correlacionados para reducir riesgos.
                    <ul>
                        <li><strong>Activos no correlacionados:</strong> Activos que no se mueven en la misma dirección al mismo tiempo.
                            <p>Por ejemplo, las acciones y los bonos a menudo tienen una correlación baja o negativa. Cuando las acciones bajan, los bonos pueden subir, y viceversa. Incluir ambos en tu portafolio reduce el riesgo general.</p>
                        </li>
                        <li><strong>Ejemplos:</strong> Acciones, bonos, criptomonedas, materias primas, bienes raíces.</li>
                    </ul>
                </li>
                <li><strong>Seguridad operativa:</strong> Usa 2FA y wallets confiables; para grandes montos, custodia en frío.
                    <ul>
                        <li><strong>2FA (Autenticación de dos factores):</strong> Proceso de seguridad que requiere dos formas de identificación.
                            <p>Además de tu contraseña, el 2FA puede requerir un código enviado a tu teléfono o generado por una aplicación como Google Authenticator, añadiendo una capa extra de seguridad.</p>
                        </li>
                        <li><strong>Wallets:</strong> Dispositivos o aplicaciones para almacenar criptomonedas.
                            <p>Es crucial elegir una wallet segura y confiable. Algunas opciones populares incluyen Ledger (hardware wallet), Trezor (hardware wallet) y Electrum (software wallet).</p>
                        </li>
                        <li><strong>Custodia en frío:</strong> Almacenar criptomonedas fuera de línea para mayor seguridad.
                            <p>Esto implica guardar tus claves privadas en un dispositivo que no está conectado a Internet, como un hardware wallet o una cartera de papel, protegiéndolas de hackeos.</p>
                        </li>
                    </ul>
                </li>
            </ul>
            <hr class="section-sep" data-sep-purpose="section">
        </section>

        <section id="technical-analysis" class="doc-section">
            <h2>Análisis técnico</h2>
            <ul>
                <li>
                    <strong>Patrones de velas japonesas:</strong> Formaciones como
                    "hammer" o "doji" indican reversiones. Confirma con volumen.
                </li>
                <li>
                    <strong>Indicadores técnicos:</strong> Herramientas como RSI y
                    MACD ayudan a identificar sobrecompra, sobreventa y tendencias.
                </li>
                <li>
                    <strong>Niveles de soporte y resistencia:</strong> Zonas donde el
                    precio históricamente se detuvo. Usa Fibonacci para retrocesos.
                </li>
            </ul>
            <p>
                <strong>Consejo:</strong> Combina varias herramientas para validar
                señales y gestiona siempre el riesgo.
            </p>
            <hr class="section-sep" data-sep-purpose="section">
        </section>

        <section id="fundamental-analysis" class="doc-section">
            <h2>Análisis fundamental</h2>
            <ul>
                <li>
                    <strong>Métricas on-chain:</strong> Datos como el Puell Multiple o
                    SOPR muestran la salud de la red y ciclos de mercado.
                </li>
                <li>
                    <strong>Eventos macro:</strong> Políticas monetarias, inflación y
                    regulación influyen en el precio de Bitcoin.
                </li>
                <li>
                    <strong>Minería:</strong> Cambios en dificultad y hashrate
                    reflejan la estabilidad de la red.
                </li>
            </ul>
            <hr class="section-sep" data-sep-purpose="section">
        </section>

        <section id="derivatives" class="doc-section">
            <h2>Futuros y derivados</h2>
            <ul>
                <li>
                    <strong>Futuros perpetuos:</strong> Contratos sin vencimiento con
                    settlement diario. Alta flexibilidad, pero alto riesgo.
                </li>
                <li>
                    <strong>Opciones:</strong> Contratos call/put para especular o
                    proteger. Estrategias comunes: straddle, iron condor.
                </li>
            </ul>
            <p>
                <strong>Nota:</strong> Los derivados amplifican tanto ganancias como
                pérdidas. Requieren estrategias disciplinadas.
            </p>
            <hr class="section-sep" data-sep-purpose="section">
        </section>

        <hr class="section-sep" data-sep-purpose="pre-practical">
        <section id="rsi-bb-strategy" class="doc-section">
            <h2>Estrategia práctica: RSI + Bandas de Bollinger (BTC Spot)</h2>
            <p>
                Esta estrategia combina un oscilador de momentum (RSI) with un
                indicador de volatilidad (Bandas de Bollinger). Está pensada para
                traders novatos que operan BTC en mercado spot. Usa marcos
                temporales de 1H o 4H.
            </p>

            <h3 id="rsi-resumen-rapido">Resumen rápido</h3>
            <ul>
                <li>
                    <strong>Indicadores:</strong> RSI (14) + Bandas de Bollinger (SMA
                    20, ±2σ).
                </li>
                <li><strong>Temporalidad recomendada:</strong> 1H o 4H.</li>
                <li>
                    <strong>Objetivo:</strong> Entrar en rebotes cuando hay sobreventa
                    y tomar ganancias en zonas de sobrecompra o en bandazos de
                    volatilidad.
                </li>
            </ul>

            <h3 id="rsi-explicacion-rsi">Explicación del RSI</h3>
            <p>
                El RSI (Relative Strength Index) mide fuerza y momentum en una
                escala de 0 a 100. Los umbrales comunes son
                <strong>30</strong> (sobreventa) y
                <strong>70</strong> (sobrecompra), y muchos traders añaden una media
                móvil del RSI para suavizar las señales. En tu gráfico, configura el
                RSI con longitud 14 y activa una media simple para evaluar cruces.
            </p>

            <div class="scenario-callout">
                <h4>RSI — escenarios prácticos y acción recomendada</h4>
                <ul>
                    <li>
                        <strong>RSI ≈ 50 (mercado neutro):</strong> evita entradas
                        agresivas; espera ruptura de rango, vela impulsiva o
                        confirmación de volumen antes de operar.
                    </li>
                    <li>
                        <strong>RSI &lt; 30 + vela de reversal:</strong> abre entrada
                        parcial y ubica el stop-loss bajo el mínimo reciente; escala
                        solo si el rebote continúa.
                    </li>
                    <li>
                        <strong>RSI &gt; 70 + toque de banda superior:</strong> toma
                        ganancias parciales o ajusta stops; el momentum suele relajarse
                        tras este combo.
                    </li>
                    <li>
                        <strong>Cruce del RSI sobre su media lenta:</strong> valida el
                        momentum alcista; úsalo como filtro adicional para sostener
                        posiciones o descartar rupturas débiles.
                    </li>
                    <li>
                        <strong>Divergencias (alto valor predictivo):</strong> cuando el
                        precio hace un nuevo mínimo pero el RSI sube (divergencia
                        alcista) o el precio marca un máximo y el RSI desciende
                        (divergencia bajista), prepara entradas inversas con
                        confirmación de vela.
                    </li>
                </ul>
                <div class="mini-diagram" aria-hidden="true">
                    Precio: \__/‾‾‾\ RSI: \__/__ \
                </div>
            </div>

            <h4>Ajustes recomendados para RSI</h4>
            <ul>
                <li><strong>RSI Length:</strong> 14</li>
                <li><strong>Source:</strong> Close</li>
                <li><strong>Calculate Divergence:</strong> Desactivado</li>
                <li><strong>Smoothing Type:</strong> SMA</li>
                <li><strong>Smoothing Length:</strong> 14</li>
                <li>
                    <strong>Timeframe:</strong> Chart (usar la temporalidad del
                    gráfico)
                </li>
                <li><strong>Wait for timeframe closes:</strong> Activado</li>
                <li><strong>Inputs in status line:</strong> Activado</li>
            </ul>

            <h3 id="rsi-bandas-bollinger">Explicación de Bandas de Bollinger</h3>
            <p>
                Las Bandas de Bollinger muestran una SMA central (20) y dos bandas
                ±2 desviaciones estándar. Las bandas se ensanchan con alta
                volatilidad y se estrechan con baja volatilidad (compresión).
            </p>

            <div class="scenario-callout">
                <h4>Bandas de Bollinger — escenarios prácticos y acción</h4>
                <ul>
                    <li>
                        <strong>Precio en la SMA 20 (línea central):</strong> señala
                        consolidación; espera ruptura con volumen o patrón de velas
                        antes de abrir posición.
                    </li>
                    <li>
                        <strong>Bandas estrechas (compresión):</strong> prepara alertas
                        y define niveles de entrada/stop para operar la ruptura
                        acompañada de volumen.
                    </li>
                    <li>
                        <strong>Bandas en expansión + ruptura:</strong> si el volumen
                        confirma, deja correr el trade usando trailing stop para
                        capturar la tendencia.
                    </li>
                    <li>
                        <strong>Toque de banda inferior + RSI bajo:</strong> busca
                        rebotes medidos; entra parcial con stop bajo la banda y objetivo
                        en la SMA 20 o banda superior.
                    </li>
                </ul>
                <p class="numeric-example">
                    Ej.: BTC 4H: RSI 28 + martillo en banda inferior = entrada
                    parcial; stop 1.5% por debajo de la vela; TP en banda superior.
                </p>
            </div>

            <h4>Ajustes recomendados para Bandas de Bollinger</h4>
            <ul>
                <li><strong>SMA period:</strong> 20</li>
                <li><strong>StdDev:</strong> 2</li>
                <li><strong>Source:</strong> Close</li>
            </ul>

            <h3 id="rsi-reglas-estrategia">
                Reglas claras de la estrategia (entrada / salida)
            </h3>
            <h4>Señal de Entrada (Compra)</h4>
            <ul>
                <li>RSI <strong>&lt; 30</strong> (zona de sobreventa).</li>
                <li>
                    Precio toca o prueba la <strong>banda inferior</strong> de
                    Bollinger.
                </li>
                <li>
                    Confirmación opcional: vela de reversal (hammer) o aumento de
                    volumen en el rebote.
                </li>
                <li>
                    Abrir posición parcial (ej. 50% del tamaño planeado) y mover el
                    resto según confirmaciones adicionales.
                </li>
            </ul>

            <h4>Señal de Salida (Venta / cierre parcial)</h4>
            <ul>
                <li>RSI se aproxima o supera <strong>70</strong>.</li>
                <li>
                    Precio toca la <strong>banda superior</strong> de Bollinger.
                </li>
                <li>
                    Si ocurre ruptura de banda with volumen alto, dejar correr parte
                    de la posición con trailing stop.
                </li>
            </ul>

            <h3 id="rsi-gestion-riesgo">Gestión de riesgo</h3>
            <ul>
                <li>
                    <strong>Tamaño de posición:</strong> no arriesgar más del 1–2% del
                    portafolio por operación.
                </li>
                <li>
                    <strong>Stop-loss:</strong> colocar por debajo de la banda
                    inferior (si entras en rebote) o según un % de pérdida máxima
                    predefinida.
                </li>
                <li>
                    <strong>Take-profit:</strong> objetivo inicial cerca de la banda
                    superior o cuando RSI ~70; considerar salida parcial y trailing
                    stop para el resto.
                </li>
                <li>
                    <strong>Apalancamiento:</strong> evitar en spot; si usas margin,
                    mantén apalancamiento muy moderado y stops ajustados.
                </li>
            </ul>

            <h3 id="rsi-practica-validacion">Práctica y validación</h3>
            <ul>
                <li>
                    Usa <strong>paper trading</strong> o el modo replay en TradingView
                    para testear la estrategia durante al menos 30 operaciones.
                </li>
                <li>
                    Lleva un <strong>diario de operaciones</strong>: fecha, marco
                    temporal, razón de entrada, precio de entrada, stop, take,
                    resultado y lecciones.
                </li>
                <li>
                    Evita operar en noticias de alto impacto; las rupturas durante
                    noticias pueden generar falsas señales y gran slippage.
                </li>
            </ul>

            <h3 id="rsi-alertas-tradingview">Alertas sugeridas en TradingView</h3>
            <ul>
                <li>Alerta cuando <strong>RSI cruza por debajo de 30</strong>.</li>
                <li>Alerta cuando <strong>RSI cruza por encima de 70</strong>.</li>
                <li>
                    Alerta visual cuando el
                    <strong>precio toca banda inferior/superior</strong> (price
                    crossing line of BB).
                </li>
            </ul>
            <hr class="section-sep" data-sep-purpose="section">
        </section>

        <section id="why-it-works" class="doc-section">
            <h2>Por qué funciona esta combinación</h2>
            <p>
                El RSI identifica condiciones extremas de momentum, mientras que las
                Bandas de Bollinger contextualizan esas señales dentro de la
                volatilidad. Juntos reducen señales falsas: RSI te dice cuándo el
                mercado está "exagerado" y las Bandas te muestran zonas de precio
                con probabilidad de rebote o ruptura.
            </p>
        </section>

        <hr class="section-sep" data-sep-purpose="section">

        <section id="example" class="doc-section">
            <h2>Ejemplo práctico (resumen)</h2>
            <p>
                Imagina BTC en 4H: RSI baja a 28 y la vela toca la banda inferior.
                En la siguiente vela aparece un martillo con mayor volumen: entrada
                parcial. Pones stop justo por debajo de la banda inferior y
                take-profit cerca de la banda superior. Si la subida tiene volumen y
                rompe la banda superior, pasas a trailing stop para capturar más
                ganancia.
            </p>
        </section>

        <hr class="section-sep" data-sep-purpose="section">

        <section id="recommended-times" class="doc-section">
            <h2>Horarios recomendados para revisar (CST, UTC−6)</h2>
            <p>
                Aquí tienes una guía práctica para revisar tus gráficos en timeframe
                1H sin estar pegado a la pantalla. Revisa justo después del cierre
                de la vela horaria (ej. 01:05) para evitar señales parciales
                mientras la vela se forma.
            </p>

            <h3 id="horarios-frecuencia-sugerida">Frecuencia sugerida</h3>
            <ul>
                <li>
                    Revisiones diarias: <strong>3–4 veces al día</strong>. Duración:
                    5–15 minutos por chequeo.
                </li>
                <li>
                    Usa alertas automáticas (RSI cruces, toque de Bandas de Bollinger,
                    rupturas) para reducir la supervisión continua.
                </li>
            </ul>

            <h3 id="horarios-concretos">
                Horarios concretos (CST, UTC−6) y por qué
            </h3>
            <ul>
                <li>
                    <strong>18:00–20:00 CST</strong> — Sesión asiática / pre-actividad
                    americana<br />
                    Por qué: empiezan a moverse los mercados asiáticos; aparecen
                    desequilibrios nocturnos y setups tempranos.
                </li>
                <li>
                    <strong>01:00–03:00 CST</strong> — Apertura europea (media)<br />
                    Por qué: flujo europeo que suele aumentar la volatilidad y
                    confirmar rupturas iniciadas en Asia.
                </li>
                <li>
                    <strong>08:00–10:00 CST</strong> — Apertura y pico de la sesión
                    americana<br />
                    Por qué: ventana con mayor volumen para BTC; señales confirmadas
                    aquí tienen más peso.
                </li>
                <li>
                    <strong>13:00–15:00 CST</strong> — Cierre de la jornada americana
                    / confirmación diaria<br />
                    Por qué: cierre de sesión en USA y reajuste de posiciones
                    globales; buen momento para decidir dejar posiciones correr o
                    asegurar ganancias.
                </li>
            </ul>

            <h3 id="horarios-checklist">
                Qué mirar en cada chequeo (checklist rápido)
            </h3>
            <ul>
                <li>
                    Cierre de la vela 1H: ¿confirmó la señal (RSI + Bandas) tras el
                    cierre?
                </li>
                <li>
                    Volumen: ¿la vela de confirmación trae volumen mayor al promedio
                    reciente?
                </li>
                <li>
                    Posición del precio respecto a la SMA20 (línea central de
                    Bollinger).
                </li>
                <li>
                    Soporte / resistencia cercano: ¿estoy entrando sobre un soporte
                    válido o en resistencia fuerte?
                </li>
                <li>
                    Gestión: mover stop a breakeven si se alcanzó tu objetivo
                    intermedio; considerar salida parcial si RSI &gt; 70.
                </li>
                <li>
                    Noticias programadas: si hay evento macro, reducir exposición o
                    evitar abrir nuevas posiciones.
                </li>
            </ul>

            <h3 id="horarios-reglas-practicas">
                Reglas prácticas para no sobre-operar
            </h3>
            <ul>
                <li>
                    No entrar solo por una vela incompleta; esperar cierre horario.
                </li>
                <li>
                    Si recibes una alerta fuera de tus ventanas, esperar el siguiente
                    cierre de 1H para confirmar.
                </li>
                <li>
                    Máximo recomendado mientras aprendes: 1–2 operaciones simultáneas
                    en spot.
                </li>
            </ul>

            <h3 id="horarios-plantilla-compacta">
                Plantilla de horario compacta (ejemplo)
            </h3>
            <ul>
                <li>Opción 3 checks: <strong>20:05, 01:05, 09:05 CST</strong>.</li>
                <li>
                    Opción 4 checks: <strong>20:05, 01:05, 09:05, 14:05 CST</strong>.
                </li>
            </ul>
        </section>

        <hr class="section-sep" data-sep-purpose="section">

        <section id="swing-trading-guide" class="doc-section">
            <h2>Swing trading — guía práctica</h2>
            <p>
                El swing trading busca capturar movimientos intermedios (desde horas
                hasta semanas). No es scalping ni inversión a muy largo plazo. Se
                basa en identificar tendencias, rebotes y rupturas, gestionando
                riesgo con stops y tamaño de posición adecuados.
            </p>

            <h3 id="swing-caracteristicas">Características principales</h3>
            <ul>
                <li>Horizonte típico: varias horas hasta semanas.</li>
                <li>
                    Timeframes usados comúnmente: <strong>1H, 4H, diario</strong>. Tú
                    usarás 1H para entradas y 4H para confirmaciones mayores.
                </li>
                <li>
                    Se apoya en análisis técnico: soportes/resistencias, RSI, Bandas
                    de Bollinger, volumen.
                </li>
                <li>
                    Gestión de riesgo: stops claros, tamaño de posición controlado
                    (1–2% del portafolio por operación).
                </li>
            </ul>

            <h3 id="swing-ventajas-desventajas">Ventajas y desventajas</h3>
            <ul>
                <li>
                    <strong>Ventajas:</strong> más oportunidades que el swing a
                    diario; permite sacar provecho de movimientos significativos sin
                    vigilar todo el día.
                </li>
                <li>
                    <strong>Desventajas:</strong> requiere disciplina con stops;
                    movimientos grandes pueden generar mayor drawdown temporal.
                </li>
            </ul>

            <h3 id="swing-proceso">
                Proceso simplificado de una operación swing (pasos)
            </h3>
            <ol>
                <li>
                    Identificar setup: RSI y Bandas de Bollinger muestran condición
                    (ej. RSI &lt; 30 + toque banda inferior).
                </li>
                <li>
                    Confirmar: espera cierre de vela 1H; revisa volumen y estructura
                    (soporte/resistencia).
                </li>
                <li>
                    Calcular tamaño de posición: riesgo monetario = 1% del portafolio;
                    distancia al stop → determinar tamaño.
                </li>
                <li>
                    Abrir posición parcial (opcional): por ejemplo 50% del tamaño
                    planeado para validar movimiento.
                </li>
                <li>
                    Gestionar: mover stop a breakeven al alcanzar objetivo parcial;
                    tomar ganancias parciales cuando RSI ≥ 60–70 o precio en banda
                    superior.
                </li>
                <li>
                    Salir o trailing: si ruptura con volumen, usar trailing stop; si
                    señal se invalida (RSI cruza en sentido contrario), cerrar
                    parcialmente o totalmente.
                </li>
            </ol>

            <h3 id="swing-reglas-riesgo">
                Reglas de gestión de riesgo (esenciales)
            </h3>
            <ul>
                <li>Riesgo por operación: ≤ 1–2% del portafolio.</li>
                <li>
                    Stop-loss: colocarlo según soporte técnico o por debajo de la
                    banda inferior si entras en rebote.
                </li>
                <li>
                    Take-profit: objetivo inicial en banda superior o cuando RSI ≈ 70;
                    considerar salida parcial y trailing stop.
                </li>
                <li>
                    Registro: llevar un diario con marco temporal, razón de entrada,
                    stop, take, resultado y lección.
                </li>
            </ul>

            <h3 id="swing-ejemplo">Ejemplo práctico breve (resumen)</h3>
            <p>
                BTC en 1H: RSI baja a 28 y la vela toca la banda inferior. Esperas
                el cierre de la vela 1H; aparece una vela martillo con volumen
                mayor. Entras parcial, pones stop por debajo del mínimo reciente (o
                banda inferior) y TP inicial en banda superior. Si la subida tiene
                volumen y rompe la banda superior, aplicas trailing stop.
            </p>

            <hr class="section-sep" data-sep-purpose="pre-checklist">
            <h3 id="swing-checklist">
                Checklist rápido antes de abrir (para pegar como card)
            </h3>
            <div class="trade-checklist">
                <h4>Checklist antes de operar</h4>
                <ul>
                    <li>RSI <strong>&lt; 30</strong> o señal clara según regla.</li>
                    <li>Cierre de vela 1H confirma la señal.</li>
                    <li>Volumen acompaña la confirmación.</li>
                    <li>Soporte/resistencia verificados.</li>
                    <li>Stop-loss y tamaño de posición definidos (≤ 2% riesgo).</li>
                </ul>
            </div>
            <hr class="section-sep" data-sep-purpose="section">
        </section>

        <section id="advanced-strategies" class="doc-section">
            <h2>Estrategias avanzadas</h2>
            <ul>
                <li>
                    <strong>Comprar en capitulación:</strong> Usar indicadores como
                    Hash Ribbons para identificar oportunidades en pánico.
                </li>
                <li>
                    <strong>Arbitraje entre exchanges:</strong> Aprovechar diferencias
                    de precios en mercados.
                </li>
                <li>
                    <strong>Seguimiento de rupturas:</strong> Detectar rompimientos de
                    resistencias con alto volumen para entrar en tendencia.
                </li>
            </ul>
            <hr class="section-sep" data-sep-purpose="section">
        </section>

        <hr class="section-sep" data-sep-purpose="pre-footer">
        <section id="resources" class="doc-section">
            <h2>Recursos adicionales</h2>
            <ul>
                <li>
                    <strong>Documentación:</strong>
                    <a
                        href="https://www.investopedia.com/bitcoin-halving-4843769"
                        target="_blank"
                        >Bitcoin Halving (Investopedia)</a
                    >
                </li>
                <li>
                    <strong>Guías:</strong>
                    <a
                        href="https://coinbureau.com/guides/risk-management-strategies-crypto-trading/"
                        target="_blank"
                        >Estrategias de gestión de riesgos (Coin Bureau)</a
                    >
                </li>
                <li>
                    <strong>Reportes:</strong>
                    <a
                        href="https://bitcoinmagazine.com/markets/exploring-six-on-chain-indicators-to-understand-the-bitcoin-market-cycle"
                        target="_blank"
                        >Indicadores on-chain (Bitcoin Magazine)</a
                    >
                </li>
            </ul>
            <p>
                Consulta estas fuentes para mejorar tu conocimiento y estrategias.
            </p>
            <hr class="section-sep" data-sep-purpose="section">
        </section>

    </main>
    </div>
    
    <p class="liability-note" style="text-align: center; color: var(--text-muted); font-size: 0.85em; margin-top: 6px;">Contenido educativo: evalúa tus decisiones y asume la responsabilidad de cada inversión.</p>

    <script>
        import "../scripts/crypto-toc.js";

        const disclaimerPopup = document.getElementById('disclaimerPopup');
        const showPopupBtn = document.getElementById('showPopupBtn');
        const closePopupBtn = document.getElementById('closePopupBtn');
        const acceptDisclaimerBtn = document.getElementById('acceptDisclaimerBtn');

        // Función para mostrar el pop-up
        function mostrarPopup() {
            if (disclaimerPopup) {
                disclaimerPopup.style.display = 'flex';
            }
        }

        // Función para ocultar el pop-up
        function ocultarPopup() {
            if (disclaimerPopup) {
                disclaimerPopup.style.display = 'none';
            }
        }

        // Función para cuando el usuario acepta el disclaimer
        function aceptarDisclaimer() {
            ocultarPopup();
            console.log('Disclaimer aceptado.');
            localStorage.setItem('disclaimerAceptado', 'true');
        }

        if (showPopupBtn) showPopupBtn.addEventListener('click', mostrarPopup);
        if (closePopupBtn) closePopupBtn.addEventListener('click', ocultarPopup);
        if (acceptDisclaimerBtn) acceptDisclaimerBtn.addEventListener('click', aceptarDisclaimer);

        // --- Lógica para mostrar el pop-up automáticamente ---

        // Opción 1: Mostrar al cargar la página
        // window.onload = function() { // Avoid window.onload in Astro if possible, use inline script or just run code
            // Comprobar si el disclaimer ya fue aceptado (usando localStorage como ejemplo)
            if (!localStorage.getItem('disclaimerAceptado')) {
                mostrarPopup();
            }
            // Por ahora, lo mostramos directamente para la demostración
            //  mostrarPopup(); 
        // };

        // Event listener para cerrar con la tecla Escape
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape' && disclaimerPopup && disclaimerPopup.style.display === 'flex') {
                ocultarPopup();
            }
        });

        // Event listener para cerrar si se hace clic fuera del contenido del pop-up
        if (disclaimerPopup) {
            disclaimerPopup.addEventListener('click', function(event) {
                if (event.target === disclaimerPopup) { // Si el clic es en el overlay mismo
                    ocultarPopup();
                }
            });
        }
    </script>
</Layout>
